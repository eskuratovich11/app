#:import get_color_from_hex kivy.utils.get_color_from_hex
<FirstScreen>:
    md_bg_color: app.theme_cls.bg_light
    MDFillRoundFlatButton:
        id:start
        text: "start"
        pos_hint: {"center_x": 0.5, "center_y": 0.75}
        on_release: root.manager.current= 'dvizhuha'
        md_bg_color: app.theme_cls.primary_light

    MDFillRoundFlatButton:
        id: set1
        text: "settings"
        pos_hint: {"center_x": 0.5, "center_y": 0.6}
        on_release: root.manager.current= 'settings'

    MDFillRoundFlatButton:
        id: task
        text: "tasks"

        pos_hint: {"center_x": 0.5, "center_y": 0.45}
        on_release: root.manager.current= 'tasks'
    MDFillRoundFlatIconButton:
        id: exit
        icon: "exit-to-app"
        md_bg_color: app.theme_cls.primary_dark
        pos_hint: {"center_x": 0.5, "center_y": 0.3}
        on_release: app.stop()

<Tasks>:
    MDToolbar:
        id: toolbar
        title: "Tasks"
        pos_hint: {"top": 1}

    MDSwiper:
        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: scale
                    text: 'Scale'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}
                MDLabel:
                    id: x_y
                    text: 'x, y : 100 = 1 a. u (149*10^9 m)'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

                MDLabel:
                    id: vx_vy
                    text: 'vx, vy : 1 = 1 m/s'
                    pos_hint: {"center_x": 0.5, "center_y": 0.55}

                MDLabel:
                    id: m_s
                    text: 'm: 1 = 10^ 24 kg'
                    pos_hint: {"center_x": 0.5, "center_y": 0.50}

                MDLabel:
                    id: q_s
                    text: 'q: 1= 10^18 C'
                    pos_hint: {"center_x": 0.5, "center_y": 0.45}

        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: task1_1
                    text: 'Task 1'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}

                MDLabel:
                    id: task1
                    text: 'Place 2 oppositely charged objects on the screen. Add object 3 so as to avoid collision 1 and 2.'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: task2_1
                    text: 'Task 2'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}

                MDLabel:
                    id: task2
                    text: 'Create a system from a massive object and 3 objects revolving around it.'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: task3_1
                    text: 'Task 3'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}

                MDLabel:
                    id: task3
                    text: 'Create 2 objects so that body 2 rotates around body 1, with one of the bodies moving along the x-axis and the other moving along the y-axis. Next, add 3 stationary objects that will pull both.'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: task4_1
                    text: 'Task 4'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}
                MDLabel:
                    id: task4
                    text: 'Place 2 opposite charges on the same diagonal. They must not pulled each other. You can add two extra objects.'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

        MDSwiperItem:
            MDRelativeLayout:
                orientation: 'vertical'
                MDLabel:
                    id: task5_1
                    text: 'Task 5'
                    pos_hint: {"center_x": 0.5, "center_y": 0.7}


                MDLabel:
                    id: task5
                    text: 'Place 3 bodies with a small mass at the bottom of the screen. In the upper part, place the body with more mass. The velocities of the bodies are 0. Without moving the objects, make the first three objects be pulled to the larger one.'
                    pos_hint: {"center_x": 0.5, "center_y": 0.60}

    MDRelativeLayout:
    MDFillRoundFlatIconButton:
        id: back_tasks
        text: "back"
        icon: "arrow-left-bold-circle"
        md_bg_color: app.theme_cls.primary_dark
        pos_hint: {"center_x": 0.9, "center_y": 0.1}
        on_release: root.manager.current= 'first'
<MainScreen> :
    md_bg_color: app.theme_cls.bg_light
    MDFillRoundFlatButton:
        id: create
        text: "create"
        pos_hint: {"center_x": 0.15, "center_y": 0.05}
        on_release: on_release: root.open()
    MDFillRoundFlatButton:
        id: clearb
        text: "clear"
        pos_hint: {"center_x": 0.5, "center_y": 0.05}
        on_release: root.child.clear()
    MDFillRoundFlatIconButton:
        id: back_main
        icon: "arrow-left-bold-circle"
        text: "back"
        md_bg_color: app.theme_cls.primary_dark

        pos_hint: {"center_x": 0.85, "center_y": 0.05}
        on_release: root.manager.current= 'first'

<CustomLayout> :
    id: custom
    size_hint: None, None
<SecondScreen>:
    MDBoxLayout:
        orientation: 'vertical'
        adaptive_size: True
        MDTextField:
            id:x
            max_text_length: 4
            hint_text: ' x'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message(x)
        MDTextField:
            id:y
            max_text_length: 4
            hint_text: ' y'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message(y)

        MDTextField:
            id:vx
            max_text_length: 8
            hint_text: ' vx'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message(vx)
        MDTextField:
            id:vy
            max_text_length: 8
            hint_text: ' vy'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message(vy)
        MDTextField:
            id:m
            max_text_length: 10
            hint_text: ' m'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message_m(m)
        MDTextField:
            id:q
            max_text_length: 5
            hint_text: ' q'
            multiline: False
            helper_text: "Error"
            helper_text_mode: "on_error"
            error: False
            on_text: root.set_error_message(q)
        MDBoxLayout:
            adaptive_size: True
            MDIconButton:
                icon: "minus"
                pos_hint: {"center_x": 0.1, "center_y": 0.5}
                on_release: root.m_p(size, 1)
            MDTextButton:
                id: size
                text: "50"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}

            MDIconButton:
                icon: "plus"
                pos_hint: {"center_x": 0.7, "center_y": 0.5}
                on_release: root.m_p(size, 0)
        MDBoxLayout:
            adaptive_size: True
            MDIconButton:
                icon: "check-outline"
                pos_hint: {"center_x": 0.4, "center_y": 0.5}
                on_release:
                    root.create_object(x.text, y.text, vx.text, vy.text, m.text, q.text,
                    x.error, y.error, vx.error, vy.error, m.error, q.error)
                    root.dismiss()
            MDIconButton:
                icon: "arrow-left-bold"
                pos_hint: {"center_x": 0.6, "center_y": 0.5}
                on_release: root.dismiss()

<SettingScreen>:
    md_bg_color: app.theme_cls.bg_light
    MDBoxLayout:
        orientation: 'vertical'
        MDToolbar:
            id: tool
            title: "Settings"
        MDRelativeLayout:
            orientation: 'vertical'

            MDFillRoundFlatButton:
                id:change
                text:'Change language'
                pos_hint: {'center_x': 0.5, 'center_y': 0.7}
                on_release: dropdown.open(self)
            MDRelativeLayout:

                MDIconButton:
                    id: purple
                    icon: "circle"
                    md_bg_color: get_color_from_hex('9C27B0')
                    pos_hint: {"center_x": 0.3, "center_y": 0.5}
                    on_release:
                        app.theme_cls.primary_palette = "Purple"
                        root.manager.get_screen('settings').ids.purple.md_bg_color = get_color_from_hex('9C27B0')
                        root.manager.get_screen('settings').ids.red.md_bg_color = get_color_from_hex('D32F2F')
                        root.manager.get_screen('settings').ids.green.md_bg_color = get_color_from_hex('388E3C')
                        root.manager.get_screen('first').ids.start.md_bg_color = app.theme_cls.primary_light
                        root.manager.get_screen('first').ids.exit.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('dvizhuha').ids.back_main.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('tasks').ids.back_tasks.md_bg_color = app.theme_cls.primary_dark

                MDIconButton:
                    id: red
                    icon: "circle"
                    md_bg_color: get_color_from_hex('D32F2F')
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    on_release:
                        app.theme_cls.primary_palette = "Red"
                        root.manager.get_screen('settings').ids.purple.md_bg_color = get_color_from_hex('9C27B0')
                        root.manager.get_screen('settings').ids.red.md_bg_color = get_color_from_hex('D32F2F')
                        root.manager.get_screen('settings').ids.green.md_bg_color = get_color_from_hex('388E3C')
                        root.manager.get_screen('first').ids.start.md_bg_color = app.theme_cls.primary_light
                        root.manager.get_screen('first').ids.exit.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('dvizhuha').ids.back_main.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('tasks').ids.back_tasks.md_bg_color = app.theme_cls.primary_dark
                MDIconButton:
                    id: green
                    icon: "circle"
                    md_bg_color: get_color_from_hex('388E3C')
                    pos_hint: {"center_x": 0.7, "center_y": 0.5}
                    on_release:
                        app.theme_cls.primary_palette = "Green"
                        root.manager.get_screen('settings').ids.purple.md_bg_color = get_color_from_hex('9C27B0')
                        root.manager.get_screen('settings').ids.red.md_bg_color = get_color_from_hex('D32F2F')
                        root.manager.get_screen('settings').ids.green.md_bg_color = get_color_from_hex('388E3C')
                        root.manager.get_screen('first').ids.start.md_bg_color = app.theme_cls.primary_light
                        root.manager.get_screen('first').ids.exit.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('dvizhuha').ids.back_main.md_bg_color = app.theme_cls.primary_dark
                        root.manager.get_screen('tasks').ids.back_tasks.md_bg_color = app.theme_cls.primary_dark
            MDFillRoundFlatIconButton:
                id: back_set
                icon: "arrow-left-bold-circle"
                text: "back"
                md_bg_color: app.theme_cls.primary_dark
                pos_hint: {"center_x": 0.5, "center_y": 0.3}
                on_release: root.manager.current= 'first'

    DropDown:
        id:dropdown
        dropdown : self.dismiss()
        MDTextButton:
            text: 'rus'
            on_release:
                root.change(
                root.manager.get_screen('settings').ids.change,
                root.manager.get_screen('settings').ids.tool,
                root.manager.get_screen('first').ids.start,
                root.manager.get_screen('first').ids.set1,
                root.manager.get_screen('first').ids.task,
                root.manager.get_screen('dvizhuha').ids.create,
                root.manager.get_screen('dvizhuha').ids.clearb,
                root.manager.get_screen('dvizhuha').ids.back_main,
                root.manager.get_screen('settings').ids.back_set,
                root.manager.get_screen('tasks').ids.toolbar,
                root.manager.get_screen('tasks').ids.task1_1,
                root.manager.get_screen('tasks').ids.task2_1,
                root.manager.get_screen('tasks').ids.task3_1,
                root.manager.get_screen('tasks').ids.task4_1,
                root.manager.get_screen('tasks').ids.task5_1,
                root.manager.get_screen('tasks').ids.task1,
                root.manager.get_screen('tasks').ids.task2,
                root.manager.get_screen('tasks').ids.task3,
                root.manager.get_screen('tasks').ids.task4,
                root.manager.get_screen('tasks').ids.task5,
                root.manager.get_screen('tasks').ids.scale,
                root.manager.get_screen('tasks').ids.x_y,
                root.manager.get_screen('tasks').ids.vx_vy,
                root.manager.get_screen('tasks').ids.m_s,
                root.manager.get_screen('tasks').ids.q_s,
                root.manager.get_screen('tasks').ids.back_tasks,
                1 )

        MDTextButton:
            text: 'eng'

            on_release:
                root.change(

                root.manager.get_screen('settings').ids.change,
                root.manager.get_screen('settings').ids.tool,
                root.manager.get_screen('first').ids.start,
                root.manager.get_screen('first').ids.set1,
                root.manager.get_screen('first').ids.task,
                root.manager.get_screen('dvizhuha').ids.create,
                root.manager.get_screen('dvizhuha').ids.clearb,
                root.manager.get_screen('dvizhuha').ids.back_main,
                root.manager.get_screen('settings').ids.back_set,
                root.manager.get_screen('tasks').ids.toolbar,
                root.manager.get_screen('tasks').ids.task1_1,
                root.manager.get_screen('tasks').ids.task2_1,
                root.manager.get_screen('tasks').ids.task3_1,
                root.manager.get_screen('tasks').ids.task4_1,
                root.manager.get_screen('tasks').ids.task5_1,
                root.manager.get_screen('tasks').ids.task1,
                root.manager.get_screen('tasks').ids.task2,
                root.manager.get_screen('tasks').ids.task3,
                root.manager.get_screen('tasks').ids.task4,
                root.manager.get_screen('tasks').ids.task5,
                root.manager.get_screen('tasks').ids.scale,
                root.manager.get_screen('tasks').ids.x_y,
                root.manager.get_screen('tasks').ids.vx_vy,
                root.manager.get_screen('tasks').ids.m_s,
                root.manager.get_screen('tasks').ids.q_s,
                root.manager.get_screen('tasks').ids.back_tasks,
                0 )
<Object>

<Move>
